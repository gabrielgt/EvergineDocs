<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Lifecycle of elements | Evergine Doc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Lifecycle of elements | Evergine Doc ">
    <meta name="generator" content="docfx 2.59.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container flex-container">
            <label for="version" class="select-label">Version:</label>
            <select id="select-version" class="select-version" name="version" title="version">
              <option value="4.0" class="option-version">4.0
              <option value="3.0" class="option-version">3.0
              <option value="2.0" class="option-version">2.0
              <option value="1.0" class="option-version">1.0
            </select>
            <div class="hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="lifecycle-of-elements">Lifecycle of elements</h1>

<p>Running Evergine components, entities or other objects executes a number of functions in a predetermined order. This document describes those functions and explains how they fit into the execution sequence.</p>
<p>The following elements has the same lifecycle methods, and all information described in this document can be applied on each one:</p>
<ul>
<li><a href="component_arch/components/index.html">Components</a></li>
<li><a href="component_arch/entities/index.html">Entities</a></li>
<li><a href="services.html">Services</a></li>
<li><a href="scenes/scenemanagers.html">SceneManagers</a></li>
</ul>
<h2 id="lifecycle-overview">Lifecycle overview</h2>
<p>The diagram below summarizes how Evergine orders and repeats function invocations over the element's lifetime:</p>
<p><img src="images/lifecycle.png" alt="Lifecycle"></p>
<h2 id="lifecycle-properties">Lifecycle properties</h2>
<p>All elements that implements the default lifecycle shares the same properties. These properties and methods are exposed in the <code>AttachableObject</code> class. Because of this, the Component, Entity, Service or SceneServices classes extend AttachableObject class.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>IsEnabled</strong> (getter and setter)</td>
<td>Allows to enable or disable an element. A disabled Behavior is not updated, or a disabled Drawable doesn't draw anything.</td>
</tr>
<tr>
<td><strong>State</strong> (getter)</td>
<td>Gets the current state of this object. We cover this area later in this document</td>
</tr>
</tbody>
</table>
<p>To easy checking states, Evergine offers several properties (getter only) to know in which state are the element:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>IsLoaded</strong></td>
<td>Indicates if this object has been <strong>loaded</strong> (the OnLoaded() method has been invoked).</td>
</tr>
<tr>
<td><strong>IsAttached</strong></td>
<td>Indicates if this object has been <strong>attached</strong> (the OnAttached() method has been invoked). When an element is detached this property is set to <code>false</code></td>
</tr>
<tr>
<td><strong>IsActivated</strong></td>
<td>Indicates if this object has been <strong>activated</strong> (the OnActivated() method has been invoked).</td>
</tr>
<tr>
<td><strong>IsStarted</strong></td>
<td>Indicates if this object has been <strong>started</strong> (the Start() method has been invoked).</td>
</tr>
<tr>
<td><strong>IsDestroyed</strong></td>
<td>Indicates if this object has been <strong>destroyed</strong> (the OnDestroy() method has been invoked).</td>
</tr>
</tbody>
</table>
<h2 id="initialization">Initialization</h2>
<p>These methdos get usually called when the Application starts.</p>
<h3 id="onloaded">OnLoaded()</h3>
<p>This method is called after the element is deserialized (during the scene loading) or it is created from code:</p>
<ul>
<li>This method is invoked <strong>once</strong> during the object lifetime.</li>
<li>OnLoaded() is usually used to initialize all variables and functionality that <strong>does not depends on other external elements</strong>.</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>On this step, all Bindings are not yet resolved.</p>
</div>
<h3 id="onattached">OnAttached()</h3>
<p>This method is invoked when an element is attached into Evergine.</p>
<ul>
<li><strong>All bindings are resolved</strong> prior execution of this method.</li>
<li>This method is used to stablish dependencies with external elements.</li>
<li>This method returns a boolean value. Return <code>true</code> if the execution has been succeded, otherwise the component is not suscessfully attached.</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>On this step, all binding elements (Components for example) may not have been attached yet.</p>
</div>
<h3 id="onactivated">OnActivated()</h3>
<p>This method is invoked when an element is activated, this can happend  after the OnAttached() execution or we change the IsEnabled property.</p>
<ul>
<li>This method only is invoked if <code>IsEnabled == true</code>, if a Component <strong>or</strong> its Entity has been disabled, this method is not executed.</li>
<li>During this method, we setup the functionality once we have previously stablished all dependencies. We usually put here all code that can be easily undone when the component will be deactivated (subscribe to events for example.)</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>On this step, all dependencies (Components for example) have being previously attached, but some elements may not have been activated yet.</p>
</div>
<h3 id="start">Start()</h3>
<p>This method is called <strong>before the first frame update</strong> only if the element has been previously activated.</p>
<ul>
<li>This method is called only <strong>once</strong> per attachment. If we enable or disable a Component, the Start method is not called again. However, if we detach a Component and reattach again to an Entity, the Start() method will be called again (after the OnAttached() and OnActivated() invocations)</li>
<li>In that method we usually put all initialization functionality that depends on other elements and that we only want to execute once.</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>On this step, all dependencies have being activated, but some elements may not have been started yet.</p>
</div>
<h2 id="per-frame--loop">Per frame  loop</h2>
<p>During the appliction Update/Draw loop, each Frame the following methods are invoked:</p>
<h3 id="update">Update()</h3>
<p>This method is only available on <a href="component_arch/components/behaviours.html">Behaviors</a>, <a href="services.html">UpdatableServices</a> or <a href="scenes/scenemanagers.html">UpdatableSceneManagers</a>.</p>
<ul>
<li>This method can only be executed if the element has been started (attached and initialized).</li>
<li>In general terms, the Update() method is called once per frame.</li>
<li>We put here execution code to update the application logic or state (player movement, camera input controller, etc...)</li>
</ul>
<h3 id="draw">Draw()</h3>
<p>This method is only available on <a href="component_arch/components/drawables.html">Drawables</a></p>
<ul>
<li>This method can only be executed if the element has been started (attached and initialized).</li>
<li>The Draw() method is called <strong>once per drawing camera</strong>, during the rendering phase.</li>
<li>We put here all code to update RenderObjects before the camera will process them.</li>
</ul>
<h2 id="deinitialization">Deinitialization</h2>
<p>Evergine follows the following steps to properly destroy or detach an element</p>
<h3 id="ondeactivated">OnDeactivated()</h3>
<p>This method is called when an activated element becomes disabled or inactive.</p>
<ul>
<li>This method is the opposite of OnActivated() method, and it's a good practice to undo all functionalities done in the OnActivated() method (unsubscribe events for example).</li>
</ul>
<h3 id="ondetach">OnDetach()</h3>
<p>OnDetach is called when an element is detached</p>
<ul>
<li>This method is the opposite of OnAttached() method, and it's a good practice to undo all functionalities done in the OnAttached() method.</li>
</ul>
<h3 id="ondestroy">OnDestroy()</h3>
<p>This method is invoke when the element is defintively removed and we want to destroy or dispose objects.</p>
<ul>
<li>A destroyed element cannot be attached again, and it is finally disposed.</li>
<li>A good practice is to remove all internal data of this component (tables, collections, etc...)</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
          
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
              
              <span>Generated by <strong>DocFX</strong></span>
            </div>      
          </div>
        </div>
      </footer>    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
